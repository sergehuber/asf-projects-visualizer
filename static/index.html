<!DOCTYPE html>
<!--
 Copyright 2024 The Apache Software Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASF Projects Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <h1 id="apache-projects-visualizer" class="text-3xl font-bold mb-8 text-gray-800">ASF Projects Visualizer</h1>

        <div class="mb-6">
            <div class="flex space-x-4 mb-4">
                <select id="dimensionSelector" class="p-2 border rounded">
                    <option value="category">Category</option>
                    <option value="key_features">Key Features</option>
                    <option value="refined_category">Refined Category</option>
                    <option value="programming_language">Programming Language</option>
                </select>
                <input type="text" id="searchInput" placeholder="Search projects by name" class="flex-grow p-2 border rounded">
                <input type="text" id="queryInput" placeholder="Query Projects" class="flex-grow p-2 border rounded">
                <button id="queryButton" class="bg-blue-500 text-white px-4 py-2 rounded">Query</button>
                <button id="clearButton" class="bg-gray-300 text-gray-700 px-4 py-2 rounded">Clear</button>
            </div>
            <div class="flex items-center mb-4">
                <button id="toggleAllCategories" class="bg-blue-500 text-white px-4 py-2 rounded mr-4">Deselect All</button>
                <div id="categoryFilters" class="flex flex-wrap gap-4 p-2"></div>
                <div class="mt-8">
                    <button id="openCompareModal" class="bg-blue-500 text-white px-4 py-2 rounded">Compare Projects</button>
                </div>
            </div>
        </div>


        <div id="defaultView">
            <div id="visualization"></div>
        </div>

        <div id="filteredView" class="hidden">
            <h2 class="text-2xl font-bold mb-4">Suggested Stacks</h2>
            <div id="suggestedStacks" class="bg-white p-4 rounded shadow overflow-y-auto" style="max-height: 600px;"></div>
        </div>
    </div>

    <div id="projectModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-8 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 id="modalTitle" class="text-2xl font-bold"></h2>
                <button id="closeModal" class="text-2xl">&times;</button>
            </div>
            <div id="projectDetails"></div>
            <div class="mt-4">
                <button id="compareFromDetails" class="bg-blue-500 text-white px-4 py-2 rounded">Compare This Project</button>
            </div>
        </div>
    </div>

    <div id="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-8 rounded-lg">
            <p>Querying projects...</p>
        </div>
    </div>

    <div id="comparisonModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-8 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 id="project-comparison" class="text-2xl font-bold">Project Comparison</h2>
                <button id="closeComparisonModal" class="text-2xl">&times;</button>
            </div>
            <div id="comparisonInputs" class="mb-4">
                <input type="text" id="compareProject1" placeholder="Project 1" class="border p-2 rounded w-full mb-2">
                <input type="text" id="compareProject2" placeholder="Project 2" class="border p-2 rounded w-full mb-2">
                <input type="text" id="compareProject3" placeholder="Project 3 (optional)" class="border p-2 rounded w-full mb-2">
                <input type="text" id="compareProject4" placeholder="Project 4 (optional)" class="border p-2 rounded w-full mb-2">
                <button id="compareBtn" class="bg-blue-500 text-white px-4 py-2 rounded">Compare</button>
            </div>
            <div id="comparisonDetails" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
        </div>
    </div>

    <script src="scripts.js"></script>
</body>
</html>